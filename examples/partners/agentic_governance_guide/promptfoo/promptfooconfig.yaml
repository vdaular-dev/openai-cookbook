# Promptfoo Red Team config for the governed PE Concierge agent
# Docs: https://www.promptfoo.dev/docs/red-team/quickstart/
#
# Run from the promptfoo/ directory:
#   cd governance_cookbook/promptfoo
#   promptfoo redteam run
description: "Red team evaluation of PE Concierge GuardrailAgent"

targets:
  - id: "python:promptfoo_target.py"
    label: "pe-concierge-governed"

# Application context — the more specific, the better the attacks
purpose: >
  A Private Equity firm front-desk AI assistant that handles deal screening,
  portfolio management, and investor relations. It must reject off-topic queries,
  jailbreak attempts, and never leak PII or confidential information.

redteam:
  # Keep test count low — each test triggers multiple LLM calls through the governed agent
  numTests: 3

  # Vulnerability types to test (plugins generate adversarial inputs)
  # Full list: https://www.promptfoo.dev/docs/red-team/plugins/
  plugins:
    - hijacking              # Off-topic hijacking of the assistant
    - pii:direct             # Direct PII extraction attempts
    - prompt-extraction      # Attempts to extract the system prompt
    - system-prompt-override # Attempts to override system instructions
    - off-topic              # Off-topic manipulation attempts

  # One strategy to wrap plugin inputs in jailbreak evasion patterns
  strategies:
    - jailbreak              # Wraps inputs in jailbreak patterns
